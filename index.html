<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AgeFinder</title>
    <style>

        html,
        body {
            margin: 0;
            padding: 0;
            display: flex;
            flex-direction: column;
            justify-content: flex-end;
            align-items: center;
            height: 100%;
        }


        .label {
            width: auto;
            white-space: nowrap;
        }

        /* Extra small devices (phones, 600px and down) */
        @media only screen and (max-width: 600px) {

            .label,
            #date,
            #age {
                font-size: 10px;
            }
        }

        /* Small devices (portrait tablets and large phones, 600px and up) */
        @media only screen and (min-width: 600px) {

            .label,
            #date,
            #age {
                font-size: 16px;
            }
        }

        /* Medium devices (landscape tablets, 768px and up) */
        @media only screen and (min-width: 768px) {

            .label,
            #date,
            #age {
                font-size: 20px;
            }
        }

        /* Large devices (laptops/desktops, 992px and up) */
        @media only screen and (min-width: 992px) {

            .label,
            #date,
            #age {
                font-size: 22px;
            }
        }

        /* Extra large devices (large laptops and desktops, 1200px and up) */
        @media only screen and (min-width: 1200px) {

            .label,
            #date,
            #age {
                font-size: 22px;
            }
        }
    </style>
</head>

<body>
<img id="arrow" src="arrow.png" style="display: none;">
<canvas id="canvas" width="350%" height="670px"></canvas>
<div style="display: flex; ">
    <div class="label">Type birth date:</div>
    <input id="date" type="date" style="text-align: center;">
    <div id="age" style="width: 200%;">Invalid date.</div>
</div>

<img id="changeToPolish" src="polandFlag.jpg" style="position: fixed; bottom: 0;left: 0;cursor: pointer;">
<script>
    document.getElementById(`changeToPolish`).addEventListener(`click`, function () {
        window.location.href = `polish.html`
    })
    arrowY = 0
    direction = 1
    maxY = 100
    minY = 0

    function animateArrow() {
        canvas = document.getElementById("canvas")
        contex = canvas.getContext("2d")
        arrow = document.getElementById("arrow")
        contex.clearRect(0, 0, canvas.width, canvas.height);
        if (arrow.complete && arrow.naturalWidth != 0) {
            contex.drawImage(arrow, 0, arrowY);
        }
        arrowY += direction * 2
        if (arrowY >= maxY || arrowY <= minY) {
            direction *= -1
        }
        requestAnimationFrame(animateArrow)
    }

    window.addEventListener("DOMContentLoaded", function () {
        arrow = document.getElementById("arrow")
        if (arrow.complete && arrow.naturalWidth != 0) {
            animateArrow()
        } else {
            arrow.addEventListener("load", function () {
                animateArrow()
            })
        }
    })

    function calculateAge() {
        let birthDate = new Date(document.getElementById("date").value);
        if (birthDate.toString() === "Invalid Date") {
            document.getElementById("age").textContent = "Invalid date.";
            return;
        }
        let today = new Date();
        let years = today.getFullYear() - birthDate.getFullYear();
        let months = today.getMonth() - birthDate.getMonth();
        let days = today.getDate() - birthDate.getDate();
        if (days < 0) {
            months--;
            days += new Date(today.getFullYear(), today.getMonth(), 0).getDate();
        }
        if (months < 0) {
            years--;
            months += 12;
        }
        document.getElementById("age").textContent = `Calculated age is ${years} years and ${months} months and ${days} days.`;
    }
    document.getElementById("date").addEventListener("change", calculateAge);
    function setMidnightInterval() {
        function calculateNextMidnight() {
            let now = new Date();
            let midnight = new Date(now.getFullYear(), now.getMonth(), now.getDate() + 1);
            return midnight - now;
        }
        function setDailyInterval() {
            const timeToMidnight = calculateNextMidnight();
            setTimeout(function () {
                calculateAge();
                setDailyInterval();
            }, timeToMidnight);
        }
        setDailyInterval();
    }
    setMidnightInterval();
</script>
</body>

</html>